!function(b,D,s){var t,a,n,I,o,r,i,x,l,c,e,M,v,j,w,E,u,d,p,f;D[b]||(n=[],o=[],r={},i="TsarvarWidgetQueue",c=function(e){s.getElementsByTagName("head")[0].appendChild(e)},e=function(e){var r;a?e&&e():(e&&n.push(e),t||(t=!0,(r=s.createElement("style")).innerHTML=b.css.split("$").join("tsarvarW"),c(r),e=function(){if(I=D.jQuery,!a){for(a=!0,x=0;x<n.length;++x)n[x].call(b);var r;D[i]||(D[i]=[]),D[i].length&&(b.initServers(D[i]),D[i]=[]),D[i].push=(r=b,function(e){r.initServers(e)})}},D.jQuery?e():((r=s.createElement("script")).type="text/javascript",r.onload=e,r.async=!0,r.src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js",c(r))))},M=function(e){var r={color:"#fff",blackMode:!1};if(e&&e.length&&6===(e=3===(e="#"===e[0]?e.substring(1):e).length?e[0]+e[0]+e[1]+e[1]+e[2]+e[2]:e).length){e=e.toLowerCase();var t=[];for(x=0;x<6;++x){var a="0123456789abcdef".indexOf(e[x]);if(-1===a)return r;t[x]=a}r.color="#"+e,r.blackMode=16*t[0]+t[1]+16*t[2]+t[3]+16*t[4]+t[5]<384}return r},v=function(e){if(e){var r=e.element,t=e.serverData,a=!1,n="#fff";e.color&&e.color.length?(a=(h=M(e.color)).blackMode,n=h.color):e.blackMode&&(a=!0,n="#181818");var o=(o=I("<div></div>").append(I(r).clone()).html()).split("<a").join("<div").split("</a").join("</div"),s=I(o).get(0);I(r).replaceWith(s),I(r=s).addClass("tsarvarW"),b.setColor(r,n);function i(){f.push.apply(f,arguments)}function l(e,r){f.push('<div class="tsarvarW-',e,'" ',r||"",">")}function c(){f.push("</div>")}function v(e,r){f.push('<span class="tsarvarW-',e,'" ',r||"",">")}function u(){f.push("</span>")}function d(e,r){f.push('<a class="tsarvarW-',e,'" href="',b.getUrl(r),'">')}function p(){f.push("</a>")}var f=[];if(t&&t.id){var g=t.status,h=t.url;if(l("w"),d("i",h),t.faviconUrl&&(l("ib",'style="background-image:url('+t.faviconUrl+')"'),c(),l("iw"),l("iw2"),i('<img src="',t.faviconUrl,'" />'),c(),c()),p(),d("n",h),v("nl"),i(w("s")),u(),v("nl"),i(t.gameShortName),u(),v("nv"),i(t.name),u(),p(),l("d"),d("di",h),l("s"+(g?" tsarvarW-sO":"")),i(g?"Online":"Offline"),c(),p(),t.versionName&&(d("di",h),i(w("v")),v("vn",'style="color:'+(t.versionColorHex||"")+';"'),i(t.versionName),u(),p()),g&&t.mapName&&(d("di",h),i(w("m")),v("vn",'style="color:'+(t.mapColorHex||"")+';"'),i(t.mapName),u(),p()),g&&t.playersMaxCount&&(e=a?"#3a3a3a":"#eee",o="#1a6dea",n=s="",n=(a=100*t.playersCount/t.playersMaxCount)<50?(s="background-color:"+o,"background-image:linear-gradient(90deg,"+e+" 50%,transparent 50%),linear-gradient("+(180*a/50-90)+"deg,"+e+" 50%,transparent 50%)"):(s="background-color:"+e,"background-image:linear-gradient(-90deg,"+o+" 50%,transparent 50%),linear-gradient("+(180*a/50-270)+"deg,"+o+" 50%,transparent 50%)"),d("di",h),l("o"),l("o1"),l("oc",'style="'+s+'"'),l("ocb",'style="'+n+'"'),c(),c(),c(),l("o2"),i(w("p")),v("vn"),i(t.playersCount),u(),i(" / "),i(t.playersMaxCount),c(),c(),p()),g&&t.countryName&&(d("di",h),l("o"),t.countryIco16Url&&(l("o1"),i('<img class="tsarvarW-oi" src="'+t.countryIco16Url+'" />'),c()),l("o2"),l("vn"),i(t.countryName),c(),c(),c(),p()),l("di"),i(w("a")),v("vn"),i(t.address),u(),c(),c(),g&&t.playersHoursActivity&&t.playersHoursActivity.length){for(l("c"),x=0;x<t.playersHoursActivity.length;++x){var m=t.playersMaxCount?100*t.playersHoursActivity[x]/t.playersMaxCount:0,m=Math.max(0,Math.min(100,m));l("ci"),l("cib",'style="height:'+m+'%;"'),c(),c()}c();var y=[],C=108e5+(new Date-864e5);for(y.push(E(C=C-C%36e5+1e3)),x=0;x<5;++x)y.push(E(C+4*(x+1)*60*60*1e3));for(l("ct"),x=0;x<y.length;++x)l("cti"),i(y[x]),c();c()}if(c(),g&&t.players&&t.players.length){for(l("p"),v("pt"),i(w("p")),i(":"),u(),x=0;x<t.players.length;++x)16===x&&(v("ps","onclick=\"jQuery(this).parents('.tsarvarW-p').addClass('tsarvarW-pS')\""),i("..."),u()),d(16<=x?"pH":"",t.players[x].url),i(t.players[x].name),p();c()}l("f"),d("fl","/widget"),i("Tsarvar Widget"),p(),c()}else l("na"),i("Tsarvar Widget"),i("<br />"),i(w("n")),c();f=f.join(""),I(r).html(f),b.local&&D.Tsarvar.initDom(r);g=function(){j(r)};I(r).parent().bind("change",g),I(D).bind("resize",g),g(),b.local||I(r).find("a").bind("mousedown",function(){var e;I(this).attr("data-tsarvarWR")||(e=b.getUrl("/serverWidgetFollow?f="+encodeURIComponent(D.location.href)+"&t="+encodeURIComponent(I(this).attr("href")),!0),I(this).attr("href",e).get(0).href=e,I(this).attr("data-tsarvarWR","true"))})}},j=function(e){e&&I(e).parents("html, body").get(0)&&(I(e).width()<=360?I(e).addClass("tsarvarWC"):I(e).removeClass("tsarvarWC"))},w=function(e){return r[e]||""},E=function(e){var r=(e=!(e instanceof Date)?new Date(e):e).getHours(),e=e.getMinutes();return r+":"+(10<e?"":"0")+e},u=function(){var e={};return e.pageUrl=D.location.href,e},b=D[b]={css:".${width:100%;text-decoration:none;background:#fff;text-align:left;border-radius:10px;box-shadow:0 1px 10px -6px rgba(0,0,0,.75);overflow:hidden}.$B{background:#181818;box-shadow:0 -2px 4px -2px rgba(0,0,0,.5),0 3px 7px -3px #000}.$-w{position:relative;padding:15px 7px 7px 139px;min-height:124px;box-sizing:border-box}.$C .$-w{padding:7px}.$-i{position:absolute;top:7px;left:7px;display:block;text-decoration:none;width:120px;min-height:110px;overflow:hidden;border-radius:5px}.$C .$-i{width:100%;position:relative;top:auto;left:auto}.$-ib{position:absolute;top:-5%;left:-5%;width:110%;height:110%;filter:blur(5px);background-size:cover;background-position:center}.$-iw{display:table;width:120px;position:absolute;left:50%;top:50%;margin:-60px 0 0 -60px}.$-iw2{display:table-cell;height:120px;vertical-align:middle;text-align:center}.$-i img{max-width:120px;box-shadow:-2px 0 8px -2px rgba(0,0,0,.5),2px 0 8px -2px rgba(0,0,0,.5)}.$-n{display:block;font-size:16px;line-height:18px;text-decoration:none!important;font-weight:700;letter-spacing:.25px;color:#000;transition:color .1s}.$B .$-n{color:#fff}.$-n:hover{color:#1a6dea}.$C .$-n{text-align:center;margin:12px 0 0 0}.$-nl{display:inline-block;margin:0 7px 0 0;color:rgba(0,0,0,.85);font-weight:300}.$B .$-nl{color:rgba(255,255,255,.6)}.$C .$-nv{display:block;margin-top:12px}.$-d{margin:8px 0 0 0;font-size:13px;line-height:13px}.$C .$-d{text-align:center}.$-di{display:inline-block;vertical-align:middle;margin:0 12px 8px 0;color:rgba(0,0,0,.5);text-decoration:none;transition:opacity .1s}.$B .$-di{color:rgba(255,255,255,.35);text-shadow:0 1px 3px rgba(0,0,0,.75)}.$C .$-di{display:block;margin:12px 0}a.$-di:hover{opacity:.75}.$-s{font-size:14px;line-height:14px;text-transform:uppercase;font-weight:700;letter-spacing:.25px}.$-sO{color:#1a6dea}.$-vn{margin:0 0 0 7px;font-weight:700;color:rgba(0,0,0,.95)}.$B .$-vn{color:rgba(255,255,255,.65)}.$-o{display:table;margin:0 auto}.$-o1{display:table-cell;vertical-align:middle;width:16px}.$-o2{display:table-cell;vertical-align:middle}.$-oi{display:block;width:16px;height:16px}.$-oc{position:relative;width:16px;height:16px;margin:0 7px 0 0;border-radius:50%}.$-ocb{height:100%;border-radius:50%}.$-c{border-bottom:1px solid rgba(0,0,0,.05)}.$B .$-c{border-bottom-color:rgba(255,255,255,.075)}.$-ci{display:inline-block;height:24px;vertical-align:bottom;position:relative;width:4.16%}.$-cib{display:block;position:absolute;left:0;right:2px;bottom:0;background:rgba(0,0,0,.05);border-radius:2px 2px 0 0}.$B .$-cib{background:rgba(255,255,255,.075)}.$-ct{display:table;width:100%;margin:4px 0 0 0}.$-cti{display:table-cell;vertical-align:top;width:16.66%;text-align:center;font-size:10px;line-height:10px;color:rgba(0,0,0,.5)}.$B .$-cti{color:rgba(255,255,255,.25)}.$-p{padding:7px 7px 10px 10px;font-size:12px;line-height:12px;background:rgba(0,0,0,.035)}.$B .$-p{background:rgba(255,255,255,.015)}.$-p>*{display:inline-block;vertical-align:top;margin:3px 3px 0 0;padding:3px 5px;color:rgba(0,0,0,.65);border-radius:5px;box-shadow:0 2px 8px -6px rgba(0,0,0,.75),0 -1px 8px -6px rgba(0,0,0,.75);background:rgba(255,255,255,.5);text-decoration:none;max-width:150px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:color .1s,background .1s}.$B .$-p>*{background:rgba(255,255,255,.075);color:rgba(255,255,255,.45);box-shadow:0 2px 4px -2px #000,0 -2px 4px -2px #000;text-shadow:0 1px 3px rgba(0,0,0,.75)}.$-pH{display:none}.$-pS .$-pH{display:inline-block}.$-p>*+*:hover{color:#000;background:rgba(255,255,255,.85);cursor:pointer}.$B .$-p>*+*:hover{color:rgba(255,255,255,.75);background:rgba(255,255,255,.1)}.$-pt{font-weight:600;box-shadow:none!important;background:none!important}.$-p.$-pS>.$-ps{display:none}.$-f{font-size:11px;line-height:12px;text-transform:uppercase}.$C .$-f{text-align:center}.$-w+.$-f{background:rgba(0,0,0,.035)}.$B .$-w+.$-f{background:rgba(255,255,255,.015)}.$-fl{display:inline-block;vertical-align:top;padding:5px 18px;text-decoration:none;color:rgba(0,0,0,.35);font-weight:700;transition:color .1s}.$B .$-fl{color:rgba(255,255,255,.25)}.$-fl:hover{color:#000}.$B .$-fl:hover{color:rgba(255,255,255,.75)}.$-na{text-align:center;padding:10px;font-size:12px;line-height:20px;text-transform:uppercase;color:rgba(0,0,0,.85);font-weight:700;text-decoration:none}.$B .$-na{color:rgba(255,255,255,.6)}",url:"https://widget.tsarvar.com",initServers:function(n){e(function(){I(function(){!function(e,r){var t=[],a=[],n=null;for(x in e)a[x]={},a[x].serverId=e[x].serverId,e[x].serverDomain&&(a[x].serverDomain=e[x].serverDomain),e[x].serverIp&&(a[x].serverIp=e[x].serverIp),e[x].serverPort&&(a[x].serverPort=e[x].serverPort),!1!==e[x].players&&(a[x].players=!0),e[x].lang&&(n=e[x].lang);t.push("serversData="+encodeURIComponent(JSON.stringify(a))),n&&t.push("lang="+n),b.local||(o=u(),t.push("clientData="+encodeURIComponent(JSON.stringify(o))));var o=Math.floor((new Date).valueOf()/1e3);t.push("t="+(o-o%5));o=b.url+"/getServersWidgetsData?"+t.join("&"),t=s.createElement("script");t.type="text/javascript",t.onload=r,t.src=o,c(t)}(n,function(){for(x in n){var e=null;if("string"==typeof n[x].element)for(var e=[],r=I(n[x].element),t=0;t<r.length;++t)e.push(r.get(t));else e=[n[x].element];for(t=0;t<e.length;++t){var a={};for(l in n[x])a[l]=n[x][l];a.element=e[t],a.serverData=function(e){for(x=o.length-1;0<=x;--x){var r=o[x];if(e.serverId&&r.id&&parseInt(e.serverId)===r.id||e.serverDomain&&r.domain&&e.serverDomain===r.domain&&e.serverPort&&r.port&&parseInt(e.serverPort)===r.port||e.serverIp&&r.ip&&e.serverIp===r.ip&&e.serverPort&&r.port&&parseInt(e.serverPort)===r.port)return r}}(n[x]),v(a)}}})})})},addQueryData:function(e){if(e.lang&&(b.lang=e.lang),e.texts)for(x in e.texts)r[x]=e.texts[x];if(e.serversData)for(x in e.serversData)o.push(e.serversData[x])},getUrl:function(e,r){return"https://tsarvar.com"+(r&&b.lang?"/"+b.lang:"")+e},setColor:function(e,r){r=M(r);r.blackMode?I(e).addClass("tsarvarWB"):I(e).removeClass("tsarvarWB"),I(e).css("background-color",r.color)}},p=!1,f=function(){p||(p=!0,e())},s.addEventListener?s.addEventListener("DOMContentLoaded",function(){f()},!1):s.attachEvent&&((d=s.documentElement.doScroll)&&W===D.top&&function r(){if(!p&&s.body)try{d("left"),f()}catch(e){setTimeout(r,0)}}(),s.attachEvent("onreadystatechange",function(){"complete"===s.readyState&&f()})),D.addEventListener?D.addEventListener("load",f,!1):D.attachEvent&&D.attachEvent("onload",f))}("TsarvarWidget",window,document);